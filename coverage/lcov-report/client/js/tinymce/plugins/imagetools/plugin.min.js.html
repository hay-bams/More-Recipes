<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for client/js/tinymce/plugins/imagetools/plugin.min.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../../../index.html">All files</a> / <a href="index.html">client/js/tinymce/plugins/imagetools</a> plugin.min.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/670</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/340</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/390</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/1</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1</td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">!function(){"use strict";va<span class="cstat-no" title="statement not covered" >r t=function(e){var n=e,o=function(){return n};return{get:o,set:functi<span class="fstat-no" title="function not covered" >on</span>(t){n=t},clone<span class="cstat-no" title="statement not covered" >:function(){return </span>t(o<span class="fstat-no" title="function not covered" >()</span>)}}},e=tinymce<span class="cstat-no" title="statement not covered" >.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function o(t,e){return i(docum</span>e<span class="cstat-no" title="statement not covered" ></span>n<span class="fstat-no" title="function not covered" >t.</span>createElement("canvas"),t,e)}fun<span class="cstat-no" title="statement not covered" >ction r(t<span class="fstat-no" title="function not covered" >){</span>return t.get<span class="cstat-no" title="statement not covered" >Co</span>ntex<span class="cstat-no" title="statement not covered" >t("2d")}f<span class="fstat-no" title="function not covered" >un</span>cti<span class="cstat-no" title="statement not covered" >on i(t,e,n</span>)<span class="cstat-no" title="statement not covered" ></span>{return t.width=e,t.height=n,t}<span class="fstat-no" title="function not covered" >var </span>a,u,<span class="cstat-no" title="statement not covered" >c,l,s={</span>create:o,clone:fun<span class="fstat-no" title="function not covered" >ction(</span>t){<span class="cstat-no" title="statement not covered" >var e;return r(</span>e=o(</span>t</span>.wid<span class="cstat-no" title="statement not covered" >th,t.height)).drawImage(t,0,0),e},resize:i,get2dCont</span>ext:<span class="cstat-no" title="statement not covered" >r,get3dContext:function(t){var e=null;try{e=t.get</span>Context("<span class="fstat-no" title="function not covered" >we</span>bgl")||<span class="cstat-no" title="statement not covered" >t.getContext("experimental-webgl")}catch(n){}retur</span>n e||(e=n<span class="fstat-no" title="function not covered" >ul</span>l),e<span class="cstat-no" title="statement not covered" >}},f={getWidth:function(t){</span>return t.<span class="fstat-no" title="function not covered" >na</span>turalWidth<span class="cstat-no" title="statement not covered" >||t.width},getHeight:function(t){retu</span>rn t.naturalHeig<span class="cstat-no" title="statement not covered" >ht||t.height}},d=window.Promi<span class="fstat-no" title="function not covered" >se?win</span>dow.Promis<span class="cstat-no" title="statement not covered" >e:function(){var t=function(t){if("object"!=typeof this)th</span>row new TypeError("Promises must be constructed via n<span class="fstat-no" title="function not covered" >ew");if("func</span>tion"!=typeo<span class="cstat-no" title="statement not covered" >f t)t<span class="cstat-no" title="statement not covered" ></span>hrow <span class="cstat-no" title="statement not covered" >new TypeError("not a function");this._state=null,this._value=null</span>,this._deferr<span class="cstat-no" title="statement not covered" >e</span>ds=[],c(t,n(i,this),n(a,th</span>is)</span>)},e<span class="cstat-no" title="statement not covered" >=t.immediateFn||"func<span class="fstat-no" title="function not covered" >tion"==ty</span>peof<span class="cstat-no" title="statement not covered" > setImmediate&amp;&amp;setImmediate||funct</span>ion(t){setTimeout(t,1)<span class="fstat-no" title="function not covered" >};function</span> n(t<span class="cstat-no" title="statement not covered" >,e){return function(){t.apply(e,argu</span>men</span>ts)}<span class="cstat-no" title="statement not covered" >}var o=Array.isArray||function(t){<span class="fstat-no" title="function not covered" >re</span>turn"[object Array]<span class="cstat-no" title="statement not covered" >"===Objec<span class="fstat-no" title="function not covered" >t.</span>protot<span class="cstat-no" title="statement not covered" >ype.toString.call(t)};function <span class="cstat-no" title="statement not covered" >r(t){var n=this;null!==this._state?e(function(){var e=n._sta<span class="cstat-no" title="statement not covered" >t</span></span>e?t.onFulfilled:t.onRejected;<span class="cstat-no" title="statement not covered" >if(null!==e){var o;try{o=e(n._value)}c<span class="cstat-no" title="statement not covered" >a</span></span>tch(r){return void t.reject(r)}t.resolve(o)}else(n._state?t.resolve:t.reject)(n._value)}):thi</span>s</span>._de<span class="cstat-no" title="statement not covered" >ferreds.push(t)}function i(t){try{if(t===this)throw new TypeError("A p<span class="fstat-no" title="function not covered" >ro</span>mise cannot <span class="cstat-no" title="statement not covered" >be resolved with i</span>t</span>self.");i<span class="fstat-no" title="function not covered" >f(</span>t&amp;&amp;("ob<span class="cstat-no" title="statement not covered" >ject"==<span class="fstat-no" title="function not covered" >ty</span>peof t||"fu<span class="cstat-no" title="statement not covered" >nction"==typeof t)){var</span> e</span>=t.then;<span class="cstat-no" title="statement not covered" >if("function"==ty<span class="fstat-no" title="function not covered" >pe</span>of e)return <span class="cstat-no" title="statement not covered" >void c(n(e,t),n(i,this),n(a,this))}this._state=!0,this._value=t</span>,</span>u.call(th<span class="fstat-no" title="function not covered" >is</span>)}catch(o){a<span class="cstat-no" title="statement not covered" >.call<span class="cstat-no" title="statement not covered" ></span>(this,o)}}function a(t){t<span class="fstat-no" title="function not covered" >hi</span>s._state=!1,this._v<span class="cstat-no" title="statement not covered" >alue=t,u.call(this)}function u(){for(var<span class="cstat-no" title="statement not covered" ></span> t=0,e=this._deferreds.<span class="cstat-no" title="statement not covered" >lengt<span class="cstat-no" title="statement not covered" >h;t&lt;e;t++)r.call(</span>this,this._d<span class="cstat-no" title="statement not covered" >eferreds[t]);this._deferr<span class="cstat-no" title="statement not covered" ></span>e</span>ds=null}funct</span>ion c(<span class="cstat-no" title="statement not covered" >t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(</span></span>t))},function(t){o||(o=!0,n(t</span>))})}catc<span class="fstat-no" title="function not covered" >h(</span>r){i<span class="cstat-no" title="statement not covered" >f(o)r<span class="cstat-no" title="statement not covered" >eturn;o=!0,n(r)}<span class="cstat-no" title="statement not covered" >}return t.prototype["catch"]=function(t){return this.then(null,t)<span class="cstat-no" title="statement not covered" >}</span></span>,t.prototype.then=function(e,n){var o=this;return new t(function(t,i){r.call(o,new function(t,e,n,o){this.onFulf<span class="cstat-no" title="statement not covered" >illed="<span class="cstat-no" title="statement not covered" ></span>function"==typeof t?t:null,t<span class="cstat-no" title="statement not covered" >his.onRejected="function"==typeof e?e:null,this.<span class="cstat-no" title="statement not covered" ></span></span>r</span>esolve=n,this.reject=o}(e,n,t,i))})},t.all=funct</span>ion(){var e=<span class="cstat-no" title="statement not covered" >Array.prototype.s</span>l</span>ice.call(<span class="fstat-no" title="function not covered" >1=</span>==ar<span class="cstat-no" title="statement not covered" >guments.length&amp;&amp;o(arguments[0])?arguments[0]:argu</span>ments);re<span class="fstat-no" title="function not covered" >tu</span>rn <span class="cstat-no" title="statement not covered" >new t(function(t,n){if(0===e.length)return t([]);var o=e.<span class="cstat-no" title="statement not covered" >length;function r(i,a){try{if(a&amp;&amp;(<span class="cstat-no" title="statement not covered" ></span>"</span>object"==typeof a||"fun</span>ction"==t<span class="fstat-no" title="function not covered" >yp</span>eof a)){var u=a.th<span class="cstat-no" title="statement not covered" >en;<span class="cstat-no" title="statement not covered" ></span>if("f<span class="cstat-no" title="statement not covered" >un<span class="fstat-no" title="function not covered" >ct</span>ion"==typeof<span class="cstat-no" title="statement not covered" > u)return void u.call</span>(a<span class="fstat-no" title="function not covered" >,f</span>unction(t){r<span class="cstat-no" title="statement not covered" >(i,t)},n)}e[i]=a,0==-</span>-o&amp;</span>&amp;t(e)}catch(<span class="cstat-no" title="statement not covered" >c){n(c)<span class="cstat-no" title="statement not covered" >}}for(v<span class="cstat-no" title="statement not covered" >a</span></span>r i=0;i&lt;e.len</span>g<span class="cstat-no" title="statement not covered" ></span>th;i++)r(i,e[i])})},t.resolve=<span class="fstat-no" title="function not covered" >fu</span>nction(e){re<span class="cstat-no" title="statement not covered" >turn e&amp;&amp;"object"==typeof e&amp;</span>&amp;e.constructor===t?e:<span class="fstat-no" title="function not covered" >ne</span>w t(function(t){t(e)})}<span class="cstat-no" title="statement not covered" >,t.re<span class="cstat-no" title="statement not covered" ></span>ject=function<span class="fstat-no" title="function not covered" >(e</span>){return new t(<span class="cstat-no" title="statement not covered" >function(t,n){<span class="fstat-no" title="function not covered" >n(</span>e)})},t.race=function<span class="cstat-no" title="statement not covered" >(e){return new t(function(t,n){for(var o=0,r=e.length;o&lt;r;o++)e[o].then(t,n)})},t}(),h=function(t){return function(){return t}},p={noop:functi</span>on(){},noarg:fu</span>nct</span>ion(t){ret<span class="fstat-no" title="function not covered" >ur</span>n function(){return<span class="cstat-no" title="statement not covered" > t()}},compose:function(t,e){return function(){return t(e.apply(null,arguments))}},constant:h,ide<span class="cstat-no" title="statement not covered" ></span>ntity:functio<span class="fstat-no" title="function not covered" >n(</span>t){return t},tr<span class="cstat-no" title="statement not covered" >ipleEquals:function(<span class="cstat-no" title="statement not covered" >t,e){return t=</span></span>==e},cu<span class="cstat-no" title="statement not covered" >rry:funct</span>ion(t){fo<span class="fstat-no" title="function not covered" >r(</span>var e=n<span class="cstat-no" title="statement not covered" >ew Ar<span class="cstat-no" title="statement not covered" >ray(arguments.length-1),n=1;n&lt;arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=new Array(argu<span class="cstat-no" title="statement not covered" >ments.l<span class="cstat-no" title="statement not covered" ></span>ength),o=0;o&lt;n.length;o++)n[<span class="cstat-no" title="statement not covered" >o]=arguments[o];var r=<span class="fstat-no" title="function not covered" >e.</span>concat(n);re<span class="cstat-no" title="statement not covered" >turn t.ap</span>ply(nu<span class="cstat-no" title="statement not covered" ></span></span>l</span>l,r)}},not:function(t){retu</span>rn function(<span class="cstat-no" title="statement not covered" >){retu</span>r<span class="cstat-no" title="statement not covered" ></span>n!t.apply(null,arguments)}},die:func<span class="cstat-no" title="statement not covered" >tion(t){retu</span>r</span>n f</span>unction(){thro<span class="fstat-no" title="function not covered" >w </span>new Error(t)<span class="cstat-no" title="statement not covered" >}},apply:function(t){return t()},call:function(t){t()},never:h(!1),always:h(!0)},m=p.never,g=p.always,v=function(<span class="fstat-no" title="function not covered" >){</span>return y},y=<span class="cstat-no" title="statement not covered" >(l={fo</span>ld:</span>function(t,e)<span class="fstat-no" title="function not covered" >{r</span>eturn t()},i<span class="cstat-no" title="statement not covered" >s:m,isSome:m,<span class="fstat-no" title="function not covered" >is</span>None:g,getOr:c=<span class="cstat-no" title="statement not covered" >functi</span>on(</span>t){return t<span class="fstat-no" title="function not covered" >},</span>getOrThunk:u<span class="cstat-no" title="statement not covered" >=function(t){<span class="fstat-no" title="function not covered" >re</span>turn t()},getOr<span class="cstat-no" title="statement not covered" >Die:function(t){throw new Error(t||"error: <span class="cstat-no" title="statement not covered" >getOrDie called o</span>n</span> no</span>ne.")</span>},o</span>r:c,<span class="cstat-no" title="statement not covered" >orThunk:u<span class="fstat-no" title="function not covered" >,m</span>ap:v<span class="cstat-no" title="statement not covered" >,ap:v,e<span class="fstat-no" title="function not covered" >ac</span>h:function(<span class="cstat-no" title="statement not covered" >){},bind:v</span>,f</span>l</span>atte<span class="cstat-no" title="statement not covered" >n:v,exists:m,fora<span class="fstat-no" title="function not covered" >ll:g,</span>filter:v,equals:a=func<span class="fstat-no" title="function not covered" >tion(t</span>){re<span class="cstat-no" title="statement not covered" >turn t.<span class="fstat-no" title="function not covered" >is</span>None()},equ<span class="cstat-no" title="statement not covered" >als_:a,toArr</span>ay</span>:function(){return[]<span class="fstat-no" title="function not covered" >},toStri</span>ng:p.co<span class="cstat-no" title="statement not covered" >nstant(<span class="fstat-no" title="function not covered" >"n</span>one()")},Ob<span class="cstat-no" title="statement not covered" >ject.freeze&amp;&amp;Object.freeze(l),l),b=f</span>un</span>ction(t){var e=function(){return t<span class="fstat-no" title="function not covered" >},n=funct</span>ion(<span class="cstat-no" title="statement not covered" >){return r</span>},o=function(e){return e(<span class="fstat-no" title="function not covered" >t)},r={fold:f</span>unction<span class="cstat-no" title="statement not covered" >(e,n){return n(t</span>)},is:function(e){<span class="fstat-no" title="function not covered" >return</span> t==<span class="cstat-no" title="statement not covered" >=e},isSome:g,isNone:m,getOr:e,getOrThunk:e,getOrDie:e,or:n,orThunk:n,map:function<span class="cstat-no" title="statement not covered" >(e){return b(e(t))},ap:fu<span class="cstat-no" title="statement not covered" ></span>n</span>ction(<span class="fstat-no" title="function not covered" >e)</span>{return e.f<span class="cstat-no" title="statement not covered" >old(v,function(e){return b(e(t))})},each:function(e){e(t)},bind:o,fla<span class="cstat-no" title="statement not covered" >tten:e,exists:o,foral</span>l</span>:o,filt<span class="cstat-no" title="statement not covered" >er:function(<span class="cstat-no" title="statement not covered" ></span>e){return e(t)?r:y},equal</span>s:</span>function(e){retu<span class="fstat-no" title="function not covered" >rn e</span>.is(<span class="cstat-no" title="statement not covered" >t)},equ<span class="fstat-no" title="function not covered" >al</span>s_:function<span class="cstat-no" title="statement not covered" >(e,n){return e.fold(m,function(e){</span>re</span>turn n(t,e)})},t<span class="fstat-no" title="function not covered" >oArr</span>ay:f<span class="cstat-no" title="statement not covered" >unction<span class="fstat-no" title="function not covered" >()</span>{return[t]}<span class="cstat-no" title="statement not covered" >,toString:function()</span>{r</span>eturn"some("+t+")"<span class="fstat-no" title="function not covered" >}};ret</span>urn <span class="cstat-no" title="statement not covered" >r},w={some:b</span>,none:v,from:func<span class="fstat-no" title="function not covered" >tion(</span>t){r<span class="cstat-no" title="statement not covered" >eturn</span> null===t||t===undefined?y:b(t)}</span>},x=<span class="cstat-no" title="statement not covered" >"undefin</span>ed"!<span class="cstat-no" title="statement not covered" >=typeof w</span>indo<span class="cstat-no" title="statement not covered" >w?window:<span class="fstat-no" title="function not covered" >Fu</span>nct<span class="cstat-no" title="statement not covered" >ion("retur</span>n</span> this<span class="cstat-no" title="statement not covered" >;")(),R=function(t,e)<span class="fstat-no" title="function not covered" >{for(</span>var n=e<span class="cstat-no" title="statement not covered" >!==undefined</span>&amp;&amp;null!==e?e:x,o=0;o&lt;t.length&amp;&amp;n!==undefined&amp;&amp;null!<span class="fstat-no" title="function not covered" >==</span>n;++<span class="cstat-no" title="statement not covered" >o)n=n[t[o]</span>];return n},I=function(t,e)<span class="fstat-no" title="function not covered" >{v</span>ar n<span class="cstat-no" title="statement not covered" >=t.split("."</span>);return R(n,e)},T={g<span class="fstat-no" title="function not covered" >etOrDie:f</span>unct<span class="cstat-no" title="statement not covered" >ion(t,e){var n=I(t,e);if(n===undefined||null===n)throw t+</span>" not available on this browser";return n}};functio<span class="fstat-no" title="function not covered" >n k()</span>{return new(T.getOrDie("FileReader"))}var C={atob:function(t){return T.getOrDie("<span class="fstat-no" title="function not covered" >at</span>ob")<span class="cstat-no" title="statement not covered" >(t)},requestAnimati</span>onFrame:function(t){T.getOrDie("<span class="fstat-no" title="function not covered" >requestA</span>nim<span class="cstat-no" title="statement not covered" >ationFrame"</span>)(t)}};function B(t){return new d(function(e,n){var o=URL.createObjectURL</span>(t),r<span class="cstat-no" title="statement not covered" >=new Imag<span class="fstat-no" title="function not covered" >e,</span>i=function()<span class="cstat-no" title="statement not covered" >{r.remove<span class="fstat-no" title="function not covered" >Ev</span>ent<span class="cstat-no" title="statement not covered" >Listener("</span>l</span>oad"<span class="cstat-no" title="statement not covered" >,a),r.rem<span class="fstat-no" title="function not covered" >ov</span>eEv<span class="cstat-no" title="statement not covered" >entListene</span>r</span>("er<span class="cstat-no" title="statement not covered" >ror",u)};<span class="fstat-no" title="function not covered" >fu</span>ncti<span class="cstat-no" title="statement not covered" >on a(){i(),e(</span>r</span>)}fu<span class="cstat-no" title="statement not covered" >nction u(){i(),n(<span class="fstat-no" title="function not covered" >"Unab</span>le to l<span class="cstat-no" title="statement not covered" >oad data of t</span>ype "+t.type+":<span class="fstat-no" title="function not covered" > "+</span>o)}r<span class="cstat-no" title="statement not covered" >.addEventListene</span>r("load",a),r.addEventListener("error",u),r.src=o,r.complete&amp;&amp;a()})}function U(t){return new d(<span class="fstat-no" title="function not covered" >func</span>tion<span class="cstat-no" title="statement not covered" >(e,n){var o=new </span>XMLHttpRequest;<span class="fstat-no" title="function not covered" >o.o</span>pen(<span class="cstat-no" title="statement not covered" >"GET",t,!0),o.res<span class="fstat-no" title="function not covered" >po</span>nseType="blo<span class="cstat-no" title="statement not covered" >b",o.onload=func</span>tio</span>n(){200==this.sta<span class="fstat-no" title="function not covered" >tus&amp;&amp;</span>e(th<span class="cstat-no" title="statement not covered" >is.res</span>ponse)},o.onerror=function(){var t,e=this;n(0===this.status?((<span class="fstat-no" title="function not covered" >t=new E</span>rror<span class="cstat-no" title="statement not covered" >("No access to downlo</span>ad image")).code=18<span class="fstat-no" title="function not covered" >,t.name</span>="Se<span class="cstat-no" title="statement not covered" >curityError",t):</span>new Error("Error "+e<span class="fstat-no" title="function not covered" >.status+</span>" downl<span class="cstat-no" title="statement not covered" >oading image"))},<span class="fstat-no" title="function not covered" >o.</span>send()})}fun<span class="cstat-no" title="statement not covered" >ction M(t){var e</span>=t.</span>split(","),n=/data:(<span class="fstat-no" title="function not covered" >[^;]+)/.</span>exe<span class="cstat-no" title="statement not covered" >c(e[0]);if(!</span>n)return w.none();for<span class="fstat-no" title="function not covered" >(var o,r,</span>i,a<span class="cstat-no" title="statement not covered" >=n[1],u=e[1],c=C.atob(u),l</span>=c.<span class="cstat-no" title="statement not covered" ></span>length,s=M</span>a</span>th.c<span class="cstat-no" title="statement not covered" >eil(l/1024),f=new Array(s),d=0;d&lt;s;<span class="fstat-no" title="function not covered" >++d){</span>for(<span class="cstat-no" title="statement not covered" >var h=1024*d,p=Math.min(h+1024,l),m=new Array(p-h</span>),g</span>=h,v<span class="cstat-no" title="statement not covered" >=0;g&lt;p;++v,++g)m[v]=c[g].charCodeAt(0);f[d]=(o=m,new(T.getOrDie("Ui</span>nt8A<span class="cstat-no" title="statement not covered" >rray"))(o<span class="fstat-no" title="function not covered" >))</span>}return<span class="cstat-no" title="statement not covered" > w.some((r=f,i={type:a},new(T.getOrDie("Blob"))(r,i)))}function j(t){return new d(function(e,n){M(t).fold(functi<span class="cstat-no" title="statement not covered" >on(){n("uri i<span class="cstat-no" title="statement not covered" ></span>s</span> not base</span>6</span>4: "<span class="cstat-no" title="statement not covered" >+t)},e)})<span class="fstat-no" title="function not covered" >}f</span>unction E(t){re<span class="cstat-no" title="statement not covered" >turn new d(fu<span class="cstat-no" title="statement not covered" ></span>nction(e){var n=</span>n</span>ew k<span class="cstat-no" title="statement not covered" >;n.onloadend=function<span class="fstat-no" title="function not covered" >(){e(n.re</span>sult)},n.readAs<span class="cstat-no" title="statement not covered" >DataURL(<span class="cstat-no" title="statement not covered" ></span>t)})}var A={blobToImage:B,imageToBl<span class="cstat-no" title="statement not covered" >ob:function(t){return(e=t,new d(function(t)<span class="cstat-no" title="statement not covered" >{</span></span>e.complet</span>e?t</span>(e):e.add<span class="fstat-no" title="function not covered" >Ev</span>ent<span class="cstat-no" title="statement not covered" >Listener("load",function n(){e.removeEven</span>tListene<span class="cstat-no" title="statement not covered" >r("load",n),t(e)}<span class="fstat-no" title="function not covered" >)})).</span>then<span class="cstat-no" title="statement not covered" >(function(t){var e=t.src;retur</span>n 0===e.indexOf("blob:")?U(e):0===<span class="fstat-no" title="function not covered" >e.indexOf("data:")?j(e</span>):U(<span class="cstat-no" title="statement not covered" >e)});var e},blobToDataUri:E,blobToBase64</span>:fu</span>nction(t)<span class="fstat-no" title="function not covered" >{r</span>etur<span class="cstat-no" title="statement not covered" >n E(t).then(f<span class="fstat-no" title="function not covered" >un</span>ction(t){return t.split<span class="cstat-no" title="statement not covered" >(",")[1]})},dataUriToBl</span>obSy<span class="cstat-no" title="statement not covered" >nc:M,canvasT</span>oBlo<span class="cstat-no" title="statement not covered" >b:functio<span class="fstat-no" title="function not covered" >n(</span>t,e<span class="cstat-no" title="statement not covered" >,n){return e=e||"image/png",HTMLCanvasElement.prototype.toBlob?new d(</span>f</span>unction(o<span class="fstat-no" title="function not covered" >){</span>t.t<span class="cstat-no" title="statement not covered" >oBlob(funct</span>ion(t){o(<span class="fstat-no" title="function not covered" >t)</span>},e<span class="cstat-no" title="statement not covered" >,n)}):j(t.toDataURL(e,n))},canvasToDataURL:function(t,e,n){r<span class="cstat-no" title="statement not covered" ></span>eturn e=e||"image/png",t.then(function(t){return t.toDataURL(e,n)})},blobToCanvas:function(t)</span>{re</span>turn B(t)<span class="fstat-no" title="function not covered" >.t</span>hen(<span class="cstat-no" title="statement not covered" >function(t){v<span class="fstat-no" title="function not covered" >ar</span> e,n;return e=t,URL.rev<span class="cstat-no" title="statement not covered" >okeObjectURL(e.src),n<span class="cstat-no" title="statement not covered" ></span>=s.create(f.getWidth(t),f.getHeight(t)),s.get2dContext(n).<span class="fstat-no" title="function not covered" >dr</span>awImage(t,0<span class="cstat-no" title="statement not covered" >,0),n})},uriToBlob:function(t){return 0=</span>==t.indexOf("b<span class="fstat-no" title="function not covered" >lo</span>b:")?U(t):0===t.index<span class="cstat-no" title="statement not covered" >Of("d<span class="cstat-no" title="statement not covered" ></span>ata:")?j(t):null}},z=function(t){return A.blobToImage(t)},O=function(t){return A.imageToBlob(t)};function D(t,e,n){var o=e.type;function r(e,n){return t.then(function(t</span>){return A.c</span>anv</span>asToDataU<span class="fstat-no" title="function not covered" >RL</span>(t,e,n)})}re<span class="cstat-no" title="statement not covered" >turn{getType:</span>p.co<span class="cstat-no" title="statement not covered" >nstant(o),toBlob:function(<span class="cstat-no" title="statement not covered" ></span>){return<span class="cstat-no" title="statement not covered" > d.resolve(e)},t<span class="cstat-no" title="statement not covered" >o</span></span>DataURL:function(){return n},toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then(function(t){r<span class="cstat-no" title="statement not covered" >eturn A.canvasToBlob(t,e,n)})},toAdjustedDataURL:r,toAdjustedBase64:function(t,e){return r(t,e).then(fun<span class="cstat-no" title="statement not covered" >ction(t){return t.split(","<span class="cstat-no" title="statement not covered" ></span>)</span>[1]})},toCanvas:function(){return t.then(s.clone)}<span class="cstat-no" title="statement not covered" ></span>}</span>}function S(t){return A.blobToDataUri(t).then(function(e){return D(A.blo</span>bToCanvas<span class="fstat-no" title="function not covered" >(t</span>),t,<span class="cstat-no" title="statement not covered" >e)})}var L={f<span class="fstat-no" title="function not covered" >ro</span>mBlob:S,fromCan<span class="cstat-no" title="statement not covered" >vas:functi<span class="fstat-no" title="function not covered" >on</span>(t,e){retur<span class="cstat-no" title="statement not covered" >n A.canvasToBlob(t,e).then(fun</span>ction(</span>e){</span>return D(<span class="fstat-no" title="function not covered" >d.</span>reso<span class="cstat-no" title="statement not covered" >lve(t),e,t.to<span class="fstat-no" title="function not covered" >Da</span>taURL())})},fromImag<span class="cstat-no" title="statement not covered" >e:functi<span class="cstat-no" title="statement not covered" ></span>on(t){return A<span class="fstat-no" title="function not covered" >.i</span>mageToBlob(<span class="cstat-no" title="statement not covered" >t).then(funct</span>ion(t){return S(t)})},</span>fro</span>mBlobAnd<span class="cstat-no" title="statement not covered" >UrlSync:function(t,e){return D(A.blobToC<span class="fstat-no" title="function not covered" >anvas(t),t,e</span>)}};<span class="cstat-no" title="statement not covered" >function H(t,e,n){ret<span class="fstat-no" title="function not covered" >ur</span>n(t=parseFlo<span class="cstat-no" title="statement not covered" >at(t))&gt;n?t=n:t&lt;e&amp;&amp;(t=e),t}var _=[0,.01,.02,.04,.05,.06,.<span class="fstat-no" title="function not covered" >07</span>,.0<span class="cstat-no" title="statement not covered" >8,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,</span>.22</span>,.24,.25<span class="fstat-no" title="function not covered" >,.</span>27,.28,.3,.32,.34,.3<span class="cstat-no" title="statement not covered" >6,.38,<span class="cstat-no" title="statement not covered" ></span>.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,</span>.98</span>,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.<span class="fstat-no" title="function not covered" >6,1.66,1.72,1</span>.78,<span class="cstat-no" title="statement not covered" >1.84,1.9,1.96,2,2<span class="fstat-no" title="function not covered" >.1</span>2,2.25,2.37,<span class="cstat-no" title="statement not covered" >2.5,2.62,2.75,2.87,3,3.2</span>,3.</span>4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7<span class="fstat-no" title="function not covered" >.5,7.8,8,8.4,</span>8.7,9,9.4,<span class="cstat-no" title="statement not covered" >9.6,9.8,10];function F(t,e){var n,o,r,i,a=[],u=new Array(10);for(n=0;n&lt;5<span class="fstat-no" title="function not covered" >;n</span>++){for(o=0;<span class="cstat-no" title="statement not covered" >o&lt;5;o++)a<span class="fstat-no" title="function not covered" >[o</span>]=e[o+5*n];f<span class="cstat-no" title="statement not covered" >or(o=0</span>;o&lt;5;o++)</span>{for(i=0,r=0;r&lt;5;r++)i+=t[</span>o+5*r]*a[r];u[o+5*n]=i}}retu<span class="fstat-no" title="function not covered" >rn u}function P(</span>t,e){retur<span class="cstat-no" title="statement not covered" >n e=H(e,0,1),t.map(function(t,n){ret<span class="fstat-no" title="function not covered" >ur</span>n n%6==0?t=1<span class="cstat-no" title="statement not covered" >-(1-t)*e:t*=e,H(t,0,1)})}v</span>ar </span>W={identity:function(){re<span class="fstat-no" title="function not covered" >turn[1,0,0,0,</span>0,0,<span class="cstat-no" title="statement not covered" >1,0,0,0,0,0,1,0,0<span class="fstat-no" title="function not covered" >,0</span>,0,0,1,0,0,0,0,0,1]},<span class="cstat-no" title="statement not covered" >adjust:P,multiply:F,adjustContrast:function(t,e){var n;return e=H(e,-1,1),F(t,[(n=(e*=100)&lt;0?127+e/100*127:127*(n=0==(n=e%1)?_[e</span>]:_</span>[Math.floor(e)]*(1-n)+<span class="fstat-no" title="function not covered" >_[Math.flo</span>or(e<span class="cstat-no" title="statement not covered" >)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0</span>,0,</span>0,1,<span class="cstat-no" title="statement not covered" >0,0,0,0,0<span class="fstat-no" title="function not covered" >,1</span>])},<span class="cstat-no" title="statement not covered" >adjustBrightness:function</span>(</span>t,e)<span class="cstat-no" title="statement not covered" >{return F<span class="fstat-no" title="function not covered" >(t</span>,[1,<span class="cstat-no" title="statement not covered" >0,0,0,e=H(255*e,-255,255)</span>,</span>0,1,0,0,e<span class="fstat-no" title="function not covered" >,0</span>,0,1,0,e,0,0,0,1,0<span class="cstat-no" title="statement not covered" >,0,0,0,</span>0,1])},ad<span class="fstat-no" title="function not covered" >ju</span>stSatur<span class="cstat-no" title="statement not covered" >ation:function<span class="fstat-no" title="function not covered" >(t</span>,e){var n,o,<span class="cstat-no" title="statement not covered" >r;return F(t,[(o=.3086)*(1-(n=1+((e</span>=H(<span class="cstat-no" title="statement not covered" ></span>e,-1,1))&gt;0?3*e:e)))+n,(r=.6094)*(1-n),.082*(1-n),0<span class="fstat-no" title="function not covered" >,0,o*(1</span>-n)<span class="cstat-no" title="statement not covered" >,r*(1-n)+n,.082*(1-n)</span>,0,0,o*(1-n),r*(1-n),.<span class="fstat-no" title="function not covered" >082*(1-n)+</span>n,0<span class="cstat-no" title="statement not covered" >,0,0,0,0,1</span>,0,0,0,0,0,1])},adjus<span class="fstat-no" title="function not covered" >tHue:func</span>tio<span class="cstat-no" title="statement not covered" >n(t,e){var n,o,r,i,a;ret</span>urn e=H(e,-180,180)/180*Mat<span class="fstat-no" title="function not covered" >h.PI,n=Math.cos</span>(e),o=M<span class="cstat-no" title="statement not covered" >ath.sin(e),F(t<span class="fstat-no" title="function not covered" >,[</span>(r=.213)+.78<span class="cstat-no" title="statement not covered" >7*n+o*-r,(i=.715)+n*-i+o*-i,(a=.</span>072</span>)+n*-a+.928*o,0,0,r+n*-r+.143*o,i+n*(1-i)+.14*o,a+n<span class="fstat-no" title="function not covered" >*-a+-.283*o,0,0,r</span>+n*-r+-<span class="cstat-no" title="statement not covered" >.787*o,i+n*-i+o*i,a+<span class="fstat-no" title="function not covered" >.9</span>28*n+o*a,0,0<span class="cstat-no" title="statement not covered" >,0,0,0,1,0,0,0,0,0,1])},</span>adj</span>ustColors:function(t,<span class="fstat-no" title="function not covered" >e,n,o){re</span>tur<span class="cstat-no" title="statement not covered" >n F(t,[e=H(e,0,2),0,0,0,</span>0,0,</span>n=H(n,0,2<span class="fstat-no" title="function not covered" >),</span>0,0,<span class="cstat-no" title="statement not covered" >0,0,0,o=H(o,0,2),0,0,0,0,0,1,0,<span class="fstat-no" title="function not covered" >0,</span>0,0,0,1])},a<span class="cstat-no" title="statement not covered" >djustSepia:function(t,e){return F(t</span>,P(</span>[.393,.7<span class="cstat-no" title="statement not covered" >69,.189,0,0,.349,.686,.168,0,0,.272,<span class="fstat-no" title="function not covered" >.534,.131,0</span>,0,0,0,<span class="cstat-no" title="statement not covered" >0,1,0,0,0,0,0,1],e=H(e,0,1)))},ad<span class="fstat-no" title="function not covered" >ju</span>stGrayscale:<span class="cstat-no" title="statement not covered" >function(t,e){return F(t,P([.33,.34,.33,0,</span>0,.</span>33,.34,.33,0,0,.33,.34<span class="fstat-no" title="function not covered" >,.33,0,0,0</span>,0,0<span class="cstat-no" title="statement not covered" >,1,0,0,0,0,0,1],e=H(e,0,1)))}<span class="fstat-no" title="function not covered" >};</span>function q(t<span class="cstat-no" title="statement not covered" >,e){return t.</span>toC</span>anvas().then(function(n){return<span class="fstat-no" title="function not covered" > o=n,r=t.getType(),</span>i=e,u=s<span class="cstat-no" title="statement not covered" >.get2dContext(o),a=function(t,e){va</span>r n</span>,o,r,i,a,<span class="fstat-no" title="function not covered" >u=</span>t.data,c=e<span class="cstat-no" title="statement not covered" >[0],l=e[1],s=e[2],f=e[3],d=e[4],h=e[5],p=e[6],m=e[7],g=e[8],v=</span>e[9],y=e<span class="cstat-no" title="statement not covered" >[10],b=e[11],w=e[12],x=e[13],R=e[14],I=e[15],T=e[16],k=e[17],C=e[18],B=e[19];for(a=0;a&lt;u.length;a+=4)n=u[a],o=u[a+1],r=u[a+2],i=u[a+3],u[a]=n*c+o*l+r*s+i*f+d,u[a+1]=n*h+o*p+r*m+i*g+v,u[a+2]=n*y+o*b+r*w+i*x+R,u[a+3]=n*I+o*T+r*k+i*C+B;return t}(u.getImageData(0,0,o.width,o.height),i),u.putImageData(a,0,0),L.fromCanvas(o,r);var o,r,i,a,u})}function V(t,e){return t.toCanvas().then(function(n){return o=n,r=t.getType(),i=e,c=s.get2dContext(o),a=c.getImageData(0,0,o.width,o.height),u=c.getImageData(0</span>,0,o.widt<span class="fstat-no" title="function not covered" >h,</span>o.height),u=function(t,<span class="cstat-no" title="statement not covered" >e,n</span>){va<span class="cstat-no" title="statement not covered" >r o,r,i,a,u,c,<span class="cstat-no" title="statement not covered" ></span>l,s,f,d,h,p,m,g,v,y,b;fun<span class="cstat-no" title="statement not covered" >ction w(t,e,n){return t&gt;n<span class="cstat-no" title="statement not covered" >?t=n:t&lt;e&amp;&amp;(t=e),t}for<span class="cstat-no" title="statement not covered" ></span>(</span>i=Math.round(Math.sqrt(n<span class="cstat-no" title="statement not covered" >.length)),a=Math.floor(i/2),o=t.<span class="cstat-no" title="statement not covered" >data,r=e.data,y=t.width,b=<span class="cstat-no" title="statement not covered" ></span>t</span>.height,c=0;c&lt;b;c</span>+<span class="cstat-no" title="statement not covered" ></span>+</span>)for(u=0;</span>u&lt;y;u++){<span class="fstat-no" title="function not covered" >fo</span>r(l=s=f<span class="cstat-no" title="statement not covered" >=0,h=0;h&lt;i;h++)for(d=0;d&lt;i;d+<span class="fstat-no" title="function not covered" >+)</span>p=w(u+d-a,0,y-1<span class="cstat-no" title="statement not covered" >),m=w(c+h-a,0,b-1),g=4*(m*y+p),v=n[h*i+d],l+=o[g]*v,s+=o[g+1]*</span>v,f</span>+=o[g+2]<span class="cstat-no" title="statement not covered" >*v;r[g=4*(c*y+u)]=w(l<span class="fstat-no" title="function not covered" >,0,255),r</span>[g+<span class="cstat-no" title="statement not covered" >1]=w(s,0,255),r[g+2]=w(f,0,255)}return e}(a,u,i),c.putImageData(u,0,0),L.fromCanvas(</span>o,r);var o,r,i,a,u,c})}function N(t){return functio<span class="fstat-no" title="function not covered" >n(e,n){return e</span>.toCanvas().t<span class="cstat-no" title="statement not covered" >hen(function(o){return function(e,n,o){var r,i,a=s.get2dContext(e),u=new Array(256);for(i=0;i&lt;u.length;i++)u[i]=t(i,o);return r=function(t,e){var n,o=t.data;for(n=0;n&lt;o.length;n+=4)o[n]=e[o[n]],o[n+1]=e[o[n+1]],o[n+2]=e[o[n+2]];return t}(a.getImageData(0,0,e.width,e.height),u),a.putImageData(r,0,0),L.fro</span>mCanvas(e,n)}(o,e.getType(),n<span class="fstat-no" title="function not covered" >)})}}function X(t</span>){retur<span class="cstat-no" title="statement not covered" >n function(e,n){return q(e,t(W.identity(),n))}}function $(t){return function(e){return V(e,t)}}var G,Y={invert:(G=</span>[-1,0,0,0,255,0,-1,0,0,255,0,<span class="fstat-no" title="function not covered" >0,-1,0,255,0,0,0,</span>1,0],function(t){re<span class="cstat-no" title="statement not covered" >turn q(t,G)}),brightness:X(W.adjustBrightness),hue:X(W.adjustHue),saturate:X(W.adjustSaturation),contrast:X(W.adjustContrast),grayscale:X(W.adjustGrayscale),sepia:X(W.adjustSepia),colorize:function(t,e,n,o){return q(t,W.adjustColors(W.identity(),e,n,o))},sharpen:$(</span>[0,-1,0,-1,5,-1,0,-1,0<span class="fstat-no" title="function not covered" >]),emboss:</span>$([-2,-1,0,-1,1,1,0,1,2])<span class="cstat-no" title="statement not covered" >,gamma:N(function(t,e){return 255*Math.pow(t/255,1-e)}),exposure:N(function(t,e){return 255*(1-Math.exp(-t/255*e))}),colorFilter:q,convoluteFilter:V},J={scale:function Jt(t,e,n){var o=f.getWidth(t),r=f.getHeight(t),i=e/o,a=n/r,u=!1;(i&lt;.5||i&gt;2)&amp;&amp;(i=i&lt;.5?.5:2,u=!0),(a&lt;.5||a&gt;2)&amp;&amp;(a=a&lt;.5?.5:2,u=!0);var c,l,h,p=(c=t,l=i,h=a,new d(function(t){var e=f.getWidth(c),n=f.getHe</span>ight(c),o=Math.floor(e*l)<span class="fstat-no" title="function not covered" >,r=Math.floor</span>(n*h),i=s.cre<span class="cstat-no" title="statement not covered" >ate(o,r),a=s.get2dContext(i);a.drawImage(c,0,0,e,n,0,0,o,r),t(i)}));return u?p.then(function(t){return Jt(t,e,n)}):p}},K={rotate:</span>function(t,e){return t.t<span class="fstat-no" title="function not covered" >oCanvas().th</span>en(func<span class="cstat-no" title="statement not covered" >tion(n){return o=n,r=t.getType(),i=e,a=s.create(o.width,o.height),u=s.get2dContext(a),c=0,l=0,90!=(i=i&lt;0?360+i:i)&amp;&amp;270!=i||s.resize(a,a.</span>height,a.width),90!=i&amp;&amp;180!=<span class="fstat-no" title="function not covered" >i||(c=a.width),2</span>70!=i&amp;&amp;<span class="cstat-no" title="statement not covered" >180!=i||(l=a.height),u.translate(c,l),u.rotate(i*Math.PI/180),u.drawImage(o,0,0),L.fromCanvas(a,r);var o,r,i,a,u,c,l})},flip:fu</span>nct</span>ion(t,e){<span class="fstat-no" title="function not covered" >re</span>turn t.<span class="cstat-no" title="statement not covered" >toCanvas().then(function(<span class="fstat-no" title="function not covered" >n)</span>{return o=n,<span class="cstat-no" title="statement not covered" >r=t.getType(),i=e,a=s.create(o.width,o.height),u=s.get2dContext(a<span class="fstat-no" title="function not covered" >),</span>"v"==i?(u.scale(1,-1),u.drawImage<span class="cstat-no" title="statement not covered" >(o,0,-a</span>.hei<span class="cstat-no" title="statement not covered" >ght))</span>:(u.<span class="cstat-no" title="statement not covered" >scale</span>(-1,<span class="cstat-no" title="statement not covered" >1),u.</span>draw<span class="cstat-no" title="statement not covered" >Image</span>(o,-<span class="cstat-no" title="statement not covered" >a.wid</span>th,0<span class="cstat-no" title="statement not covered" >)),L.</span>from<span class="cstat-no" title="statement not covered" >Canva</span>s(a,<span class="cstat-no" title="statement not covered" >r);va</span>r o,<span class="cstat-no" title="statement not covered" >r,i,a</span>,u})<span class="cstat-no" title="statement not covered" >},cro</span>p:fu<span class="cstat-no" title="statement not covered" >nction</span>(t,e<span class="cstat-no" title="statement not covered" >,n,o,r</span>){re<span class="cstat-no" title="statement not covered" >turn t</span>.toC<span class="cstat-no" title="statement not covered" >anvas(</span>).th<span class="cstat-no" title="statement not covered" >en(fun</span>ctio<span class="cstat-no" title="statement not covered" >n(i){r</span>etur<span class="cstat-no" title="statement not covered" >n a=i,</span>u=t.<span class="cstat-no" title="statement not covered" >getTyp</span>e(),<span class="cstat-no" title="statement not covered" >c=e,l=</span>n,f=<span class="cstat-no" title="statement not covered" >o,d=r,<span class="cstat-no" title="statement not covered" ></span>h=s.create(f,d),s.get2dContext(h).d<span class="cstat-no" title="statement not covered" >rawImage(a,-c,-l),L.fromCanvas(h,u);var a,u,c,l,f,d,h})},resize:function(t,e,n){return t.toCanvas().then(function(o){return J.scale(o,e,n).then(function(e){return L.fromCanvas(e,t.getType())})})}},Z={invert:function(t){return Y.inve<span class="cstat-no" title="statement not covered" ></span>r</span>t(t)},sha</span>rpen:function(t){return Y.sharpen(t)},emboss:function(t){return Y.emboss(t)},brightness:fun</span>ction(t,e){return Y.b</span>rightness<span class="fstat-no" title="function not covered" >(t</span>,e)},hu<span class="cstat-no" title="statement not covered" >e:function(t,e){return Y.<span class="fstat-no" title="function not covered" >hu</span>e(t,e)},satu<span class="cstat-no" title="statement not covered" >rate:function(t,e){return Y.saturate(t,e)},contrast:function(t,e){return Y.contrast(t,e)},grayscale:function(t,e){return Y.grayscale(t,e)},sepia:function(t<span class="fstat-no" title="function not covered" >,e</span>){return Y.sepia(t,e)},colorize:function(t,e,n,o){return Y.colorize(t,e,n,o)},gam<span class="fstat-no" title="function not covered" >ma</span>:function(<span class="cstat-no" title="statement not covered" >t,e){return Y.gamma(t,e)},exposure:function(<span class="cstat-no" title="statement not covered" ></span>t,e){return Y.exposure(t,e)},flip:function(t,e){return K.flip(t,e)},crop:function(t,e,n,o,r){return K.crop(t,e,n,o,r)},resize:function(t<span class="cstat-no" title="statement not covered" >,e,n){return K.resize(t,e<span class="cstat-no" title="statement not covered" >,n)},rotate:function(t,e){return K.rotat<span class="cstat-no" title="statement not covered" >e(t,e)}},Q=function(t){re<span class="cstat-no" title="statement not covered" >turn t.toBlob()},tt={blobToImageResult:function(t){return L.fromBlob(t)},fromBlobAndUrlSync:function(t,e){return L.fromBlobAndUrlSync(t,e)},imageToI</span>m<span class="cstat-no" title="statement not covered" ></span>a</span>geResult:function(t){return L.fromImage(t)},imageResultToBlob:function(t,e,n){return e==</span>=<span class="cstat-no" title="statement not covered" ></span>u</span>ndefined&amp;</span>&amp;n===undefined?Q(t):t.toAdjustedBlob(e,n)},imageResultTo</span>OriginalBlob:Q,imageResu</span>ltToDataU<span class="fstat-no" title="function not covered" >RL</span>:fun<span class="cstat-no" title="statement not covered" >ction(t<span class="fstat-no" title="function not covered" >){</span>return t.toData<span class="cstat-no" title="statement not covered" >URL()}},et=function(){ret<span class="fstat-no" title="function not covered" >ur</span>n T.getOrDie<span class="cstat-no" title="statement not covered" >("URL")<span class="fstat-no" title="function not covered" >},</span>nt={createObjectURL:function(t<span class="cstat-no" title="statement not covered" >){return et().crea</span>teOb<span class="cstat-no" title="statement not covered" >jectURL(t)},rev<span class="cstat-no" title="statement not covered" ></span>okeObjectURL:function(t){et().re<span class="cstat-no" title="statement not covered" >vokeObjectURL(t)<span class="cstat-no" title="statement not covered" ></span>}</span>},ot=tinym<span class="fstat-no" title="function not covered" >ce</span>.util.Tools.resolve("tiny<span class="cstat-no" title="statement not covered" >mce.uti<span class="cstat-no" title="statement not covered" ></span>l.Delay"),rt=tinymce.util.Tools.res<span class="cstat-no" title="statement not covered" >olve("tinymce.util.Promise"),it=tinymce.util.Tools.resolve("tiny<span class="cstat-no" title="statement not covered" ></span>m</span>ce.util.U</span>RI"),at=function(t){return t.getParam("imagetools_toolbar","rotateleft rotateright | flipv </span>fliph | crop editimag</span>e i</span>ma</span>geoptions<span class="fstat-no" title="function not covered" >")</span>},ut<span class="cstat-no" title="statement not covered" >=functi<span class="fstat-no" title="function not covered" >on</span>(t){return t.ge<span class="cstat-no" title="statement not covered" >tParam("imagetools_proxy")},ct={g</span>et</span>ImageSize<span class="fstat-no" title="function not covered" >:f</span>unct<span class="cstat-no" title="statement not covered" >ion(t){<span class="fstat-no" title="function not covered" >va</span>r e,n;functi<span class="cstat-no" title="statement not covered" >on o(t){return/^</span>[0</span>-9\.]+px$/<span class="cstat-no" title="statement not covered" >.test(t)}return e=t.style.width,n=t.style.height,e||n?o(e)&amp;&amp;o(n)?{w:parseInt(e,10),h:p<span class="fstat-no" title="function not covered" >ar</span>seInt(n,10)}<span class="cstat-no" title="statement not covered" >:null:(e=t.width</span>,n=t.height,e&amp;&amp;n?{w:parseInt(e,10),h:parseInt(n,10)}:null)},setImageSize:function(t,e){var n,o;e&amp;&amp;(n=t.style.width,o=t.style.height,(n||o)&amp;&amp;(t.style.width=e.w+"px",t.style.height=e.h+"px",t.removeAttr<span class="fstat-no" title="function not covered" >ibute("da</span>ta-mce-style"<span class="cstat-no" title="statement not covered" >)),n=t.width,o=t.height,(n||o)&amp;&amp;(t.setAttribute("wid</span>th",e.w),t.setAttribute("height",e.h)))},getNaturalImageSize:function(t){return{w:t.naturalWidth,h:<span class="fstat-no" title="function not covered" >t.</span>naturalHeight}}<span class="cstat-no" title="statement not covered" >},lt=(Array.prototype.indexOf,undefined</span>,Array.prototyp<span class="fstat-no" title="function not covered" >e.</span>push,Array.prot<span class="cstat-no" title="statement not covered" >otype.slice,function(t,e){for(var n=0,o=t.l</span>ength;n&lt;o;n++){var r=t[n];if(e(r,n,t))re</span>turn<span class="cstat-no" title="statement not covered" > w.some(r)}return <span class="fstat-no" title="function not covered" >w.n</span>one()}),st=functio<span class="cstat-no" title="statement not covered" >n(t){return nu</span>ll!=<span class="cstat-no" title="statement not covered" >=t&amp;&amp;t!==undefin</span>ed},<span class="cstat-no" title="statement not covered" >ft={tr</span>aver<span class="cstat-no" title="statement not covered" >se:fun</span>ctio<span class="cstat-no" title="statement not covered" >n(t<span class="cstat-no" title="statement not covered" ></span>,e){var n;return n=e.reduce(function(t,e){return st(t)?t[e]:undefined},t),st(n)?n:null},readBlob:functio</span>n(t){return ne<span class="cstat-no" title="statement not covered" >w rt(function(e){var n=new <span class="fstat-no" title="function not covered" >k;</span>n.onload=function(t)<span class="cstat-no" title="statement not covered" >{var n=t.targe</span>t;e(<span class="cstat-no" title="statement not covered" >n.result)},n.re</span>adAs<span class="cstat-no" title="statement not covered" >Text(t)})},request</span>UrlA<span class="cstat-no" title="statement not covered" >sBlob:function(t,e</span>){re<span class="cstat-no" title="statement not covered" >turn new rt(fun</span>ctio<span class="cstat-no" title="statement not covered" >n(o){var r;(r=new <span class="cstat-no" title="statement not covered" ></span>function(){return new(T.getOrDie("XMLHttpReque</span>st</span>"<span class="cstat-no" title="statement not covered" >))}).onreadystatec<span class="fstat-no" title="function not covered" >ha</span>nge=function<span class="cstat-no" title="statement not covered" >(){4===r.readyState&amp;</span>&amp;o({sta</span>tus</span>:r.s<span class="cstat-no" title="statement not covered" >tatus,blob:this.res<span class="fstat-no" title="function not covered" >ponse})</span>},r.ope<span class="cstat-no" title="statement not covered" >n("GET",t,!0),n.each(e,fu<span class="fstat-no" title="function not covered" >nc</span>tion(t,e){r.<span class="cstat-no" title="statement not covered" >setRequestHeader(e,t)}),r.responseType="blob",r.send()})},parseJson:function(t){var e;try{e=JSON.parse(t)}catch(n){}return e}},dt=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],ht=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_fo</span>und",message:"The provided </span>api key could not<span class="fstat-no" title="function not covered" > be f</span>ound."}<span class="cstat-no" title="statement not covered" >,{type:"domain_not_truste<span class="fstat-no" title="function not covered" >d"</span>,message:"Th<span class="cstat-no" title="statement not covered" >e api key is not valid for the request origins."}],pt=function(t){return"ImageProxy HTTP error: "+lt(dt,function(e){return t===e.code}).fold(p.constant("Unknown ImageProxy error"),function(t){return t.message})},mt=functi</span>on(t){var e=pt(t);ret</span>urn rt.reject(e)}<span class="fstat-no" title="function not covered" >,gt=f</span>unction(t){retur<span class="cstat-no" title="statement not covered" >n lt(ht,function(e){retur<span class="fstat-no" title="function not covered" >n </span>e.type===t})<span class="cstat-no" title="statement not covered" >.fold(p.constant("Unknown service error"),function(t){return t.message})},vt=function(t,e){return ft.readBlob(e).then(function(t){var e,n,o</span>,r=(e=t,n=ft.parseJson(e),"</span>ImageProxy Service <span class="fstat-no" title="function not covered" >error: </span>"+((o=ft.t<span class="cstat-no" title="statement not covered" >raverse(n,["error","type"<span class="fstat-no" title="function not covered" >])</span>)?gt(o):"Inv<span class="cstat-no" title="statement not covered" >alid JSON in service error me<span class="fstat-no" title="function not covered" >ss</span>age"));retur<span class="cstat-no" title="statement not covered" >n rt.reject(r)})},yt={handleServiceEr</span>ror</span>Res</span>pon</span>se:f<span class="cstat-no" title="statement not covered" >unction(t,e){return<span class="fstat-no" title="function not covered" > 400===</span>(n=t<span class="cstat-no" title="statement not covered" >)||403===n||500===n?</span>vt(0,e):mt(t);var n}<span class="fstat-no" title="function not covered" >,handleH</span>ttpE<span class="cstat-no" title="statement not covered" >rror:mt,getHttpErrorM</span>sg:pt,getServiceErr<span class="fstat-no" title="function not covered" >orMsg:g</span>t},b<span class="cstat-no" title="statement not covered" >t=function(t,e){retu</span>rn ft.requestUrlAsBlob(<span class="fstat-no" title="function not covered" >(n=t,o=e,r=</span>-1===n.<span class="cstat-no" title="statement not covered" >indexOf("?")?"?":"&amp;",/[?&amp;]a</span>piKey=/.test(n)|<span class="fstat-no" title="function not covered" >|!o?</span>n:n+r+"<span class="cstat-no" title="statement not covered" >apiKey="+encodeURICo</span>mponent(o)),{"Content<span class="fstat-no" title="function not covered" >-Type":"a</span>pplicat<span class="cstat-no" title="statement not covered" >ion/json;charset=UTF-8","</span>tiny-api-key":e}).the<span class="fstat-no" title="function not covered" >n(functio</span>n(t){re<span class="cstat-no" title="statement not covered" >turn t.status&lt;200||t.stat</span>us&gt;=300?yt.handleServi<span class="fstat-no" title="function not covered" >ceErrorRes</span>ponse(t<span class="cstat-no" title="statement not covered" >.status,t.blob):rt.resolve</span>(t.blob)});var n,o<span class="fstat-no" title="function not covered" >,r},wt</span>=functi<span class="cstat-no" title="statement not covered" >on(t,e){return e?bt(t,</span>e):(n=t,ft.requestUrl<span class="fstat-no" title="function not covered" >AsBlob(n,</span>{}).then(func<span class="cstat-no" title="statement not covered" >tion(t){return t.status&lt;200||t.</span>status&gt;=300?yt.han<span class="fstat-no" title="function not covered" >dleHtt</span>pError(<span class="cstat-no" title="statement not covered" >t.status):rt.resolve(t</span>.blob)}));var n},xt=t<span class="fstat-no" title="function not covered" >inymce.ut</span>il.Tool<span class="cstat-no" title="statement not covered" >s.resolve("tinymce.dom.DO</span>MUtils"),Rt=tinym<span class="fstat-no" title="function not covered" >ce.ut</span>il.Tool<span class="cstat-no" title="statement not covered" >s.resolve("tinymce.ui</span>.Factory"),It=tin<span class="fstat-no" title="function not covered" >ymce.</span>util.Tools.resol<span class="cstat-no" title="statement not covered" >ve("tinymce.geom.Rect"),Tt=fun</span>ction(t){return new<span class="fstat-no" title="function not covered" > rt(fun</span>ction(e){v<span class="cstat-no" title="statement not covered" >ar n=function(){t.removeEv</span>entListener("load",<span class="fstat-no" title="function not covered" >n),e(t)</span>};t.com<span class="cstat-no" title="statement not covered" >plete?e(t):t.addEventLi</span>ste</span>ner(<span class="cstat-no" title="statement not covered" >"load",n)<span class="fstat-no" title="function not covered" >})</span>},kt<span class="cstat-no" title="statement not covered" >=tinymce.util.Tools</span>.</span>resol<span class="cstat-no" title="statement not covered" >ve("tinymce.dom.DomQuery"),Ct=<span class="fstat-no" title="function not covered" >tinymce.util.Tools</span>.res<span class="cstat-no" title="statement not covered" >olve("tinymce.util.Obs</span>ervable"),Bt=tinymce.util.Tools<span class="fstat-no" title="function not covered" >.resolve("tinymce.u</span>til.VK"<span class="cstat-no" title="statement not covered" >),Ut=0,Mt={create:function(t){retur</span>n new(Rt.get("Control").extend(<span class="fstat-no" title="function not covered" >{Defaults:{classes:</span>"ima<span class="cstat-no" title="statement not covered" >gepanel"},selection:fun</span>ction(t){return arguments.leng<span class="fstat-no" title="function not covered" >th?(this.state.set</span>("rect",t)<span class="cstat-no" title="statement not covered" >,this):this.state.get("rect")},imageSize:function(){var t=this.state.get("v</span>iewRect");return{w:t.w,h:t.h}},toggleCropRect:function(t){this.<span class="fstat-no" title="function not covered" >state.set("cropEnable</span>d",t<span class="cstat-no" title="statement not covered" >)},imageSrc:function(t</span>){v</span>ar e=<span class="cstat-no" title="statement not covered" >this,n=ne<span class="fstat-no" title="function not covered" >w I</span>mag<span class="cstat-no" title="statement not covered" >e;n.src=t,Tt(n).then(funct</span>i</span>on(){<span class="cstat-no" title="statement not covered" >var t,o,r=e.state.get("viewR<span class="fstat-no" title="function not covered" >ect");if((o=e.$e</span>l.fi<span class="cstat-no" title="statement not covered" >nd("img"))[0])o.replaceWith(n);e</span>lse{var i=document.createEle<span class="fstat-no" title="function not covered" >ment("div");i.cl</span>assN<span class="cstat-no" title="statement not covered" >ame="mce-imagepanel-bg",e</span>.ge</span>tEl()<span class="cstat-no" title="statement not covered" >.appendChild(i),e.getEl().appendChild(n)}t={x:0,y</span>:0,w:<span class="cstat-no" title="statement not covered" >n.naturalWidth,h:n.naturalHeight},e.state.set("view</span>Rect"<span class="cstat-no" title="statement not covered" >,t),e.state.set("rect",It.inflate(t,-20,-20)),r</span>&amp;&amp;r.w<span class="cstat-no" title="statement not covered" >===t.w&amp;&amp;r<span class="fstat-no" title="function not covered" >.h=</span>==t.<span class="cstat-no" title="statement not covered" >h||e.zoomFit(),e.repaintImage(),e.fire("load")})},zoom:function(t){return arguments.length?(this.state.set("zoo</span>m</span>",t),<span class="cstat-no" title="statement not covered" >this):thi<span class="fstat-no" title="function not covered" >s.s</span>tate<span class="cstat-no" title="statement not covered" >.get("zoom")},postRender:function(){ret</span>u</span>rn th<span class="cstat-no" title="statement not covered" >is.imageSrc(this.settings<span class="fstat-no" title="function not covered" >.imageSrc),th</span>is._super()},zoomFit:f<span class="fstat-no" title="function not covered" >un</span>ctio<span class="cstat-no" title="statement not covered" >n(){var t,e,n,o,r,i;t=this.$el.fi<span class="cstat-no" title="statement not covered" ></span>nd("img"),e=this.getEl().clientWidth,n=this.getEl().clientHeight,o=t[0].naturalWidth,r=t[0].naturalHeight,(i=Math.min((e-10)/o,(n-10)/r))&gt;=1&amp;&amp;(i=1),this.zoom(i)},repaintImage:function(){var t,e,n,o,r,i,a,u,c,l,s</span>;s=this.getEl(),c=this.zo<span class="fstat-no" title="function not covered" >om(),l=this.s</span>tate.get("rect")<span class="cstat-no" title="statement not covered" >,a=this.$el.find("img"),u=this.$el.find(".mce-imagepanel-bg"),r=s.offsetWidth,i=s.offsetHeight,n=a[0].naturalWidth*c,o=a[0].naturalHeight*c,t=Math.max(0,r/2-n/2),e=Math.max(0,i/2-o/2),a.css({left:t,top:e,width:n,height:o}),u.css({left:t,top:e,width:n,heigh</span>t:o}),this.cropRect&amp;&amp;(this.cropR<span class="fstat-no" title="function not covered" >ect.setRect({x:l.x*c</span>+t,y<span class="cstat-no" title="statement not covered" >:l.y*c+e,w:l.w*c,h:l.h*c}),this.cropRect.setClampR</span>ect</span>({x:t,<span class="cstat-no" title="statement not covered" >y:e,w:n,h:o}),this.cropRect.setViewPortRect({x:0,y:0,w:r,h:i}))},bindStates:funct<span class="fstat-no" title="function not covered" >io</span>n(){var t=this;<span class="cstat-no" title="statement not covered" >function e(e){t.cropRect=function(t,e,o,r,i){var a,<span class="cstat-no" title="statement not covered" >u,c,l<span class="cstat-no" title="statement not covered" ></span>,s="mce-",f=s+"c<span class="cstat-no" title="statement not covered" >rid-"+Ut++;functio<span class="cstat-no" title="statement not covered" ></span></span>n</span> d(t,e){return{x</span>:</span>e.x-t.<span class="cstat-no" title="statement not covered" >x,y:e.y-t<span class="fstat-no" title="function not covered" >.y,</span>w:e.<span class="cstat-no" title="statement not covered" >w,h:e.h}}function h(e,n,r,i){var u,c,l</span>,</span>s,f;u<span class="cstat-no" title="statement not covered" >=n.x,c=n.y,l=n.w,s=n.<span class="fstat-no" title="function not covered" >h,u+=r*e.</span>deltaX,c+=i*e<span class="cstat-no" title="statement not covered" >.deltaY,l+=r*e.delta<span class="fstat-no" title="function not covered" >W,</span>s+=i*e.deltaH,l<span class="cstat-no" title="statement not covered" >&lt;20&amp;&amp;(l=20),s&lt;20&amp;&amp;(s=20),f=t=It.c</span>lamp({x:u,y:c,w:l,h:s},o</span>,"move"===e.name),f=d<span class="fstat-no" title="function not covered" >(o,f),a.f</span>ire(<span class="cstat-no" title="statement not covered" >"updateRect",{<span class="fstat-no" title="function not covered" >re</span>ct:f}),g(f)}function<span class="cstat-no" title="statement not covered" > p(t){fu<span class="cstat-no" title="statement not covered" ></span>nction o(t,<span class="fstat-no" title="function not covered" >e)</span>{e.h&lt;0&amp;&amp;(e.h=0),e.w&lt;<span class="cstat-no" title="statement not covered" >0&amp;&amp;(e.w=0<span class="cstat-no" title="statement not covered" ></span>),kt("#"+f+"-</span>"+t,r).css({left:e.</span>x,t</span>op:e.y,width:e.w,height:e.h})<span class="fstat-no" title="function not covered" >}n.each(u,functio</span>n(e){kt<span class="cstat-no" title="statement not covered" >("#"+f+"-"+e.n<span class="fstat-no" title="function not covered" >am</span>e,r).css({left:t.w<span class="cstat-no" title="statement not covered" >*e.xMul+t<span class="fstat-no" title="function not covered" >.x</span>,top:t.h*e.<span class="cstat-no" title="statement not covered" >yMul+t.y})}),o("top",{x:e.x,y:e.y,w:e.w,h:t.y</span>-e.y}),o("right",{x:t.x+t<span class="fstat-no" title="function not covered" >.w</span>,y:t.y,w:e.<span class="cstat-no" title="statement not covered" >w-t.x-t.w+e.x,h:t.h}),o("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.</span>h+e.y}),o("left",{x:e.x,y:t.y,w:t.<span class="fstat-no" title="function not covered" >x-</span>e.x,h:t.h}),o("<span class="cstat-no" title="statement not covered" >move",t)}function m(e){p(t</span>=e)}function g(t){var e,n;m((e=o,{x:(n</span>=t)</span>.x+e.x,y:n.y+e.y,w:n.w<span class="fstat-no" title="function not covered" >,h:n.h}))}</span>return u=[<span class="cstat-no" title="statement not covered" >{name<span class="cstat-no" title="statement not covered" >:"move",xMul:0,yMul</span>:0,deltaX:1,d<span class="cstat-no" title="statement not covered" >e</span>ltaY:1,de</span>lta</span>W:0,d<span class="cstat-no" title="statement not covered" >eltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,delta</span>X:0,d<span class="cstat-no" title="statement not covered" >eltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],l=[</span>"top"<span class="cstat-no" title="statement not covered" >,"right",<span class="fstat-no" title="function not covered" >"bo</span>ttom<span class="cstat-no" title="statement not covered" >","left"],kt('&lt;div id="'+f+'" class="'+s+'<span class="fstat-no" title="function not covered" >cr</span>oprect-conta<span class="cstat-no" title="statement not covered" >iner" role="grid" ari</span>a-dropeffect="execute"&gt;').appendTo(r),n.each(l,<span class="fstat-no" title="function not covered" >fu</span>nction(t){kt<span class="cstat-no" title="statement not covered" >("#"+f,r).append('</span>&lt;di</span>v</span> id="<span class="cstat-no" title="statement not covered" >'+f+"-"+t<span class="fstat-no" title="function not covered" >+'"</span>class="'+s+'<span class="cstat-no" title="statement not covered" >cropre<span class="cstat-no" title="statement not covered" ></span>ct-block" style="disp</span>l</span>ay: n<span class="cstat-no" title="statement not covered" >one" data<span class="fstat-no" title="function not covered" >-mc</span>e-bo<span class="cstat-no" title="statement not covered" >gus="all"&gt;')})<span class="fstat-no" title="function not covered" >,n</span>.each(u,func<span class="cstat-no" title="statement not covered" >tion(t){kt("#"+f,r).a</span>ppend('&lt;div id="'+f+"-"+t.name+'" class="'+s<span class="fstat-no" title="function not covered" >+"</span>croprect-han<span class="cstat-no" title="statement not covered" >dle "+s+"croprect-</span>han</span>d</span>le-"+<span class="cstat-no" title="statement not covered" >t.name+'"<span class="fstat-no" title="function not covered" >sty</span>le="dis<span class="cstat-no" title="statement not covered" >play: none" data-mce-bogus=<span class="fstat-no" title="function not covered" >"a</span>ll" role="gridcell" tabinde<span class="cstat-no" title="statement not covered" >x="-1" aria-label="'+t.label+'" aria-grabbed="false"&gt;')}),c=n.map(u,function(e){var n;return new(Rt.get("DragHelper"))(f,{document:r.ownerDocument,hand</span>l<span class="cstat-no" title="statement not covered" >e:f+"-"+e.name,start:</span>fun</span>c</span>tion(<span class="cstat-no" title="statement not covered" >){n=t},drag:function(t){h(e,n,t.deltaX,<span class="fstat-no" title="function not covered" >t.deltaY)}})}),p(t),kt(r).o</span>n("focu<span class="cstat-no" title="statement not covered" >sin focusout",function(t){kt(t.target).attr("aria-grabbed","focus"===</span>t.type)}),kt(r).on("keydown",function(e){var o;function r(t,e,n,r,i){t.stop</span>Propa<span class="cstat-no" title="statement not covered" >gation(),<span class="fstat-no" title="function not covered" >t.p</span>reventD<span class="cstat-no" title="statement not covered" >efault(),h(o,n,r,i)}switch(n.each(u,function(t){if(e.target.id===f+"-"+t.name)return o=t,!1}),e.keyCode){case Bt.LEFT:r(e,0,t,-10,0);break;case Bt.RIGHT:r(e,0,t,10,0);break;case Bt.UP:r(e,0,t,0,-10);break;case Bt.DOWN:r(e,0,t,0,10);break<span class="fstat-no" title="function not covered" >;c</span>ase Bt.ENTER<span class="cstat-no" title="statement not covered" >:case Bt.SPACEBAR:e.preventDefault(),i()}}),a=n.extend({toggleVisibility:function(t){var e;e=n.map(u,function(t){</span>ret</span>urn"#"+f+"-"+</span>t.nam<span class="cstat-no" title="statement not covered" >e}).conca<span class="fstat-no" title="function not covered" >t(n</span>.map(l,<span class="cstat-no" title="statement not covered" >function(t){return"#"+f+"-"+t})).join(","),t?kt(e,r).show():kt<span class="fstat-no" title="function not covered" >(e</span>,r).hide()},<span class="cstat-no" title="statement not covered" >setClampRect:function(e){o=e,p(t)},setRect:m,getInnerRect:function(){return d(o,t)},setInnerRe</span>ct:g</span>,setVie</span>wPort<span class="cstat-no" title="statement not covered" >Rect:function(n){e=n,p(t)},destroy:function(){n.eac</span>h(c,f<span class="cstat-no" title="statement not covered" >unction(t){t.destroy()}),c=[]}},Ct)}(e,t.state.ge</span>t("vi<span class="cstat-no" title="statement not covered" >ewRect"),t.state.get("viewRect"),t.getEl(),funct</span>ion()<span class="cstat-no" title="statement not covered" >{t.fire("<span class="fstat-no" title="function not covered" >cro</span>p")}<span class="cstat-no" title="statement not covered" >),t.cropRect.o<span class="fstat-no" title="function not covered" >n(</span>"updateRect",functio<span class="cstat-no" title="statement not covered" >n(e){var <span class="fstat-no" title="function not covered" >n=</span>e.r<span class="cstat-no" title="statement not covered" >ect,o=t.zoom();n={x:Math.round(n.x/o),y:</span>M<span class="cstat-no" title="statement not covered" ></span>ath.round(n.y/o),w:Math.round(n.w/o),h:Math.round(n</span>.h/</span>o</span>)},t.<span class="cstat-no" title="statement not covered" >state.set("rect",n)}),t.on("remove",t.cropRect.dest</span>roy)}<span class="cstat-no" title="statement not covered" >t.state.on("change:cropEnabled",function(e){t.cropRect</span>.togg<span class="cstat-no" title="statement not covered" >leVisibility(e.value),t.repaintImage()}),t.sta</span>te.on<span class="cstat-no" title="statement not covered" >("</span>chang<span class="cstat-no" title="statement not covered" >e:zoom",function(){<span class="fstat-no" title="function not covered" >t.repai</span>ntIm<span class="cstat-no" title="statement not covered" >age()}),t.state.on("change:rect",function(n){var o=n.value;t.cropRect||e(o),t.cropRect.setRect(o<span class="fstat-no" title="function not covered" >)})}}))(t)</span>}};f<span class="cstat-no" title="statement not covered" >unction jt(t){return{blob:t,url:nt.createObjectURL(t)}}function Et(t){t&amp;&amp;nt.revokeObje</span>ctURL(t.url)}function <span class="fstat-no" title="function not covered" >At(t){n.ea</span>ch(t,Et)}fu<span class="cstat-no" title="statement not covered" >nction zt(t,e,o,r){var i,a,<span class="cstat-no" title="statement not covered" ></span>u,c,l,s,f,d,h,p,m,g,v,y,b,w</span>,x,R,I,T,k,C,B,U,M,j,E,A=fu<span class="fstat-no" title="function not covered" >nction(){var t=</span>[],e<span class="cstat-no" title="statement not covered" >=-1;function n(){return e&gt;0}functi</span>on o(){return-1!==e&amp;&amp;<span class="fstat-no" title="function not covered" >e&lt;t.lengt</span>h-1}return{d<span class="cstat-no" title="statement not covered" >ata:t</span>,add<span class="cstat-no" title="statement not covered" >:function(n)<span class="cstat-no" title="statement not covered" ></span>{var o;return o=t.spli<span class="fstat-no" title="function not covered" >ce</span>(++e),t.push(n),{state:<span class="cstat-no" title="statement not covered" >n,removed:o}},undo:funct<span class="cstat-no" title="statement not covered" ></span>ion(){if(n())return t[--e]},redo<span class="cstat-no" title="statement not covered" >:function(){if(o()</span>)return t[++e<span class="cstat-no" title="statement not covered" >]},canUndo:n,canRedo:o}}(),z=f<span class="cstat-no" title="statement not covered" ></span>unction(e){return t.rtl?e.reverse():e};function O(t){var e,n,o,r;e=i.find("#w")[0],n=i.<span class="cstat-no" title="statement not covered" ></span>f</span>ind("#h")[0],o=parseInt(e.value(),10),r=parseInt(n.value(),10),i.find("#constrain")[0].checked()&amp;&amp;U&amp;&amp;M&amp;&amp;o&amp;&amp;r&amp;&amp;("w"===t.control.settings.name?(r=Math.round(o*j),n.value(r)):(o=Math.round(r*E),e.value(o))),U=o,M=r}fu</span>nct</span>ion D(t){return M<span class="fstat-no" title="function not covered" >ath.r</span>ound<span class="cstat-no" title="statement not covered" >(100*t)+"%"}function S(){i.find("#undo").disabled(!A.canUndo()),i.find("#redo").disabl</span>ed(!A.canRedo()),i.stat<span class="fstat-no" title="function not covered" >usbar.find(</span>"#s<span class="cstat-no" title="statement not covered" >ave").disabled(!A.canUndo())}function L(){i.find("#undo").dis</span>abled(!0),i.find("#r<span class="fstat-no" title="function not covered" >edo").di</span>sabled(!0)}function H(t)<span class="cstat-no" title="statement not covered" >{t&amp;&amp;d.imageSrc(t.url)}function _(t){return function(){var e=n.grep(B,function(e){return e.settings.name!==t});n.each(e,function(t){t.hide()}),t.show(),t.focus()}}function F(t){H(c=jt(t))}function P(t){H(e=jt(</span>t)),At(A.add(e).removed),<span class="fstat-no" title="function not covered" >S()}function </span>W(){var t=d.selection();tt.blobToImageR<span class="cstat-no" title="statement not covered" >esult(e.blob).then(function(e){Z.crop(e,t.x,t.y,t.w,t.h).then($).then(function(t){P(t),V()})})}var q=function(t){var n=[].slice.call(arguments,1);return function(){var o=c||e;tt.blobToImageResult(o.blob).then(function(e){t.apply(this,[e].concat(n)).then($).then(F)})}};function V(){H(e),Et(c),_(a)(),S()}function N(){c?(P(c.blob),V()):function e(n,o){c?o():setTimeout(function(){n-- &gt;0?e(n,o):t.windowManager.alert("Error: failed to apply image operation.")},10)}(100,N)}function X(t){return Rt.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",paddin</span>g:"0 10 0 10",spacing:5<span class="fstat-no" title="function not covered" >,flex:0,min</span>Height:60,d<span class="cstat-no" title="statement not covered" >efaul</span>ts:{class<span class="fstat-no" title="function not covered" >es</span>:"im<span class="cstat-no" title="statement not covered" >agetool",type<span class="fstat-no" title="function not covered" >:"</span>button"},items:t})}var $=function(t){ret<span class="cstat-no" title="statement not covered" >urn t.t</span>oBlo<span class="cstat-no" title="statement not covered" >b()};function G(t,n</span>){return <span class="fstat-no" title="function not covered" >X(</span>z([{tex<span class="cstat-no" title="statement not covered" >t:"Back",onclick:V},{type:"spacer",flex:1},{text:"Apply</span>",subtype<span class="fstat-no" title="function not covered" >:"</span>primary",onclick:N}])).hide().o<span class="cstat-no" title="statement not covered" >n("show",function(){L(),tt.blobToImageResult(e.blob).then(function(t){return n(t)}).then($).then(function(t){var e=jt(t);H(e),Et(c),c=e})})}function Y(n,o,r,i,a){return X(z([{text:"Back",onclick:V},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(t){var n;n=t</span>.value,tt<span class="fstat-no" title="function not covered" >.b</span>lobToImageRes<span class="fstat-no" title="function not covered" >ul</span>t(e.blo<span class="cstat-no" title="statement not covered" >b).then(function(t){return o(t,n)}).then($).then(function(t){var e=jt(t);H(e),Et(c),c=e})},minValue:t.rtl?a:i,maxValue:t.rtl<span class="cstat-no" title="statement not covered" ></span>?i:a,value<span class="fstat-no" title="function not covered" >:r</span>,previewFilt<span class="cstat-no" title="statement not covered" >er:D},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}])).hide().on("show</span>",function(){this.find("slider").value(r),L()})}l=X(z([{text:"Back",onclick:V},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:W}])).hide().on("show hide",function(t){d.toggleCropRect("show"===t.type)}).on("show",L),s=X(z([{text:"Back",onclick:V},{type</span>:"spacer"<span class="fstat-no" title="function not covered" >,f</span>lex:<span class="cstat-no" title="statement not covered" >1},{type:"</span>textbox",<span class="fstat-no" title="function not covered" >na</span>me:"w",label:<span class="cstat-no" title="statement not covered" >"Width",size:4,onkeyup:O},{type:"textbox",name:"h",label:"Height",<span class="cstat-no" title="statement not covered" ></span>size:4,onkeyup:O},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:function(t){!0===t.control.value()&amp;&amp;(j=M/U,E=U/M)}},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",function(t){var n=parseInt(i.find("#w").value(),10),o=parseInt(i.find("#h").value(),10);t.preventDefault(),function(t){for(var n=[],o=1;o&lt;arguments.length;o++)n[o-1]=arguments[o];var r=[].slice.call(arguments,1);return function(){tt.blobToImageResult(e.blob).then(function(e){t.apply(this,[e].concat(r)).then($).then(P)})}}(Z.resize,n,o)(),V()}).on("show",L),f=X(z([{text:"Back",onclick:V},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:q(Z.flip,"h")}<span class="fstat-no" title="function not covered" >,{</span>icon:"flipv"<span class="cstat-no" title="statement not covered" >,tooltip:"Flip vertically",onclick:q(Z.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:q(Z.rotate,-90)},{ic</span>on:"rotaterig<span class="fstat-no" title="function not covered" >ht</span>",tooltip:"R<span class="cstat-no" title="statement not covered" >otate clockwise",onclick:q(Z.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}])).hide().on("show",L),m=G(0,Z.invert),I=G(0,Z.sharpen),T=G(0,Z.emboss),g=Y(0,Z.brightness,0,-1,1),v=Y(0,Z.hue,180,0,360),y=Y(0,Z.saturate,0,-1,1),b=Y</span>(0,Z.contrast,0,<span class="fstat-no" title="function not covered" >-1</span>,1),w=Y(0,Z.graysc<span class="cstat-no" title="statement not covered" >ale,0,0,1),x=Y(0,Z.sepia,0,0,1),R=function(n,o){function r(){var t,n,r;t=i.find("#r")[0].value(),n=i.find("#<span class="fstat-no" title="function not covered" >g")[0]</span>.va<span class="cstat-no" title="statement not covered" >lue(),r</span>=i.find("#b")[0].<span class="fstat-no" title="function not covered" >value</span>(),t<span class="cstat-no" title="statement not covered" >t.blobToImageResult(e.blob).t</span>hen(f</span>unction(e){return o(e,t,n,r)}).then($)<span class="fstat-no" title="function not covered" >.t</span>hen(function<span class="cstat-no" title="statement not covered" >(t){var e=jt(t);H(e),Et(c),c=e})}var a=t.rtl?2:0,u=t.rt</span>l?0:2;return X(z([{text<span class="fstat-no" title="function not covered" >:"</span>Back",onclick:V},{type:"spa<span class="fstat-no" title="function not covered" >ce</span>r",flex:1},{type<span class="cstat-no" title="statement not covered" >:"slider",label:"R",name:"r",minValue:a,value:1,maxValue<span class="cstat-no" title="statement not covered" ></span>:u,ondragend:r,pre<span class="fstat-no" title="function not covered" >vi</span>ewFilter:D},<span class="cstat-no" title="statement not covered" >{type:"slider",label:"G",name:"g",minV<span class="cstat-no" title="statement not covered" >alue:a,value:1,max</span></span>Value:u,ondragend:r,previewF<span class="cstat-no" title="statement not covered" >ilter:D},{type:"sli<span class="cstat-no" title="statement not covered" >d</span>er",la</span>bel:"B",name:<span class="cstat-no" title="statement not covered" >"b",minValue:a,val<span class="cstat-no" title="statement not covered" >u</span>e:1,ma</span>xValue:u,o<span class="cstat-no" title="statement not covered" >ndragend:r,previewF<span class="cstat-no" title="statement not covered" >i</span>lter:D</span>},{type:"spa<span class="cstat-no" title="statement not covered" >cer",flex:1},{text<span class="cstat-no" title="statement not covered" >:</span>"Apply</span>",subtype:"primary",onclick:N}<span class="cstat-no" title="statement not covered" >])).hide().on("show",func</span>t</span>ion(){i.find("#r,#g,#b").value(1),L()})}(0,Z.<span class="fstat-no" title="function not covered" >colorize),k=Y(0,Z</span>.gamma,0,-<span class="cstat-no" title="statement not covered" >1,1),C=Y(0,Z.<span class="fstat-no" title="function not covered" >ex</span>posure,1,0,2<span class="cstat-no" title="statement not covered" >),u=X(z([{text:"Back",onclick:V</span>},{type:"spacer",f<span class="fstat-no" title="function not covered" >le</span>x:1},{text:"<span class="cstat-no" title="statement not covered" >hue",icon:"hue",onclick:_(</span>v)},{text:"saturate",icon:"saturate",onclick:_(y)},{t</span>ext:"sepia",icon:"sepia",<span class="fstat-no" title="function not covered" >onclick:_(x)}</span>,{te<span class="cstat-no" title="statement not covered" >xt:"emboss",i</span>con:"emboss",onclick:_(T)},{text:"exp<span class="fstat-no" title="function not covered" >osure",icon:"</span>exp<span class="cstat-no" title="statement not covered" >osure",onclick:_</span>(C)},{type:"spacer",flex:1}])).hide(),a=X(z([<span class="fstat-no" title="function not covered" >{tooltip:"Crop",</span>icon<span class="cstat-no" title="statement not covered" >:"crop",oncli</span>ck:_(l)},{tooltip:"R<span class="fstat-no" title="function not covered" >esize",i</span>con<span class="cstat-no" title="statement not covered" >:"resize2"<span class="fstat-no" title="function not covered" >,o</span>nclick:_(s)}<span class="cstat-no" title="statement not covered" >,{tooltip:"Or</span>ientation",</span>icon:"ori</span>entation",onclick:_(f)},{tooltip:"Brightness",icon:"sun",onclick:<span class="fstat-no" title="function not covered" >_(</span>g)},{toolti<span class="cstat-no" title="statement not covered" >p:"Sharpen",icon</span>:"sharpen",onclick:_(I)},{toolt<span class="fstat-no" title="function not covered" >ip</span>:"Contrast",icon:"co<span class="cstat-no" title="statement not covered" >ntrast"</span>,onc<span class="cstat-no" title="statement not covered" >lick:_(b)<span class="cstat-no" title="statement not covered" ></span>},{tooltip:"Color levels",icon:"drop",onclick:_(R)},{tooltip:"Gamma",icon:"gamma",onclick:_(k)},{tooltip:"Invert",icon:"invert",</span>onclick:_(m)}])),d=Mt.create({flex:1,im<span class="cstat-no" title="statement not covered" ></span>ageSrc:e.url}),h=Rt.create("Conta<span class="fstat-no" title="function not covered" >in</span>er",{layout:<span class="cstat-no" title="statement not covered" >"flex",direction:"column",pack:"start",border:"0 1 0 0",</span>padding:5,spacing:5,items:[{t<span class="fstat-no" title="function not covered" >yp</span>e:"button",<span class="cstat-no" title="statement not covered" >icon:"undo",toolti</span>p:"Undo",name:"undo",onclick:<span class="fstat-no" title="function not covered" >fu</span>nction(){H(e=A.undo(<span class="cstat-no" title="statement not covered" >)),S()}}<span class="cstat-no" title="statement not covered" ></span>,{type:"button",icon:"redo",tooltip:"Redo",</span>nam</span>e:"redo",</span>onc</span>lick:func<span class="fstat-no" title="function not covered" >tio</span>n(){<span class="cstat-no" title="statement not covered" >H(e=A.redo()),S()}},{type:"button",icon:"zoomin"</span>,tooltip:<span class="fstat-no" title="function not covered" >"Zo</span>om i<span class="cstat-no" title="statement not covered" >n",onclick:function(){var t=d.zo</span>om();t&lt;2&amp;<span class="fstat-no" title="function not covered" >&amp;(t</span>+=.1<span class="cstat-no" title="statement not covered" >),d.zoom(t)}},{</span>type:"but<span class="fstat-no" title="function not covered" >ton</span>",icon:"zoomout",tooltip:"Zoom out",onclick:function(){var t=d.zoom();t&gt;.1&amp;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >&amp;(</span>t-=.1),d.zoom(t)}}]<span class="cstat-no" title="statement not covered" >}),</span>p=Rt<span class="cstat-no" title="statement not covered" >.cr</span>eate("Con<span class="fstat-no" title="function not covered" >ta</span>ine<span class="cstat-no" title="statement not covered" >r",{type:"cont</span>ainer",la<span class="fstat-no" title="function not covered" >yo</span>ut:<span class="cstat-no" title="statement not covered" >"flex",direction:"row",align:"stretch<span class="cstat-no" title="statement not covered" ></span>",flex:1,items:z([h,d])}),B=[a,l<span class="fstat-no" title="function not covered" >,s,f</span>,u,m,g,v,y<span class="cstat-no" title="statement not covered" >,b,w,x,R,I,T,k,C],(i=t.windowManager.open({layout:"flex",direct</span>ion:"column",alig<span class="fstat-no" title="function not covered" >n:"st</span>ret<span class="cstat-no" title="statement not covered" >ch",minWi<span class="cstat-no" title="statement not covered" >dth:Math.min(xt</span></span>.DOM.getViewPort(<span class="fstat-no" title="function not covered" >).w,8</span>00)<span class="cstat-no" title="statement not covered" >,minHeigh<span class="cstat-no" title="statement not covered" >t:Math.min(xt.D</span></span>OM.getViewPort().h,650),titl</span>e:"</span>Edit<span class="cstat-no" title="statement not covered" > image",i<span class="fstat-no" title="function not covered" >te</span>ms:B<span class="cstat-no" title="statement not covered" >.concat([p]),buttons:z([{text:"S</span>a</span>ve",name:<span class="fstat-no" title="function not covered" >"s</span>ave",subtype:"prima<span class="cstat-no" title="statement not covered" >ry",onclick:function(){o(e.blob),i.close()}},{text:"Cancel",onclick:"close"}])})).on("close",function(){r(),At(A.data),A=null,c=null}),A.add(e),S(),d.on("load",function(){U=d.imageSize().w,M=d.imageSize().h,j=M/U,E=U/M,i.find("#w").value(U),i.find("#h").value(M)}),d.on("crop",W)}va</span>r Ot={edi<span class="fstat-no" title="function not covered" >t:</span>func<span class="cstat-no" title="statement not covered" >tion(t,e){return new rt(function(n</span>,o){retur<span class="fstat-no" title="function not covered" >n </span>e.t<span class="cstat-no" title="statement not covered" >oBlob().then(function(e){zt(t,jt(e),n,o)})})}},Dt=0,St=function(t,e){t.notificationManager.open({text:e,type:"error"})},Lt=functio</span>n(t){retu<span class="fstat-no" title="function not covered" >rn</span> t.<span class="cstat-no" title="statement not covered" >selection.getNode()},Ht=function(t,e){var n=e.src;return 0==</span>=n.indexO<span class="fstat-no" title="function not covered" >f(</span>"dat<span class="cstat-no" title="statement not covered" >a:")||0===n.indexOf("blo</span>b:")||new<span class="fstat-no" title="function not covered" > i</span>t(n)<span class="cstat-no" title="statement not covered" >.host==<span class="fstat-no" title="function not covered" >=t</span>.documentBaseURI.ho<span class="cstat-no" title="statement not covered" >st},_t=fun<span class="fstat-no" title="function not covered" >ct</span>ion(t,e){ret<span class="cstat-no" title="statement not covered" >urn-1!==n.inArray(t.settings.i</span>ma<span class="cstat-no" title="statement not covered" ></span>getools_co<span class="fstat-no" title="function not covered" >rs</span>_hosts,new i<span class="cstat-no" title="statement not covered" >t(e.src).h</span>ost)},Ft=function(t){var</span> e</span>,n,o,r,i,<span class="fstat-no" title="function not covered" >a;</span>retu<span class="cstat-no" title="statement not covered" >rn(e=t.editorU</span>pload.blo<span class="fstat-no" title="function not covered" >bC</span>ache<span class="cstat-no" title="statement not covered" >.getByUri(Lt(t).src))?rt.resolve(e.blob()</span>):(n=t,o=<span class="fstat-no" title="function not covered" >Lt</span>(t),a=o.src<span class="cstat-no" title="statement not covered" >,_t(n,o)?wt(o.<span class="cstat-no" title="statement not covered" ></span>src,null):Ht(n,o)?O(o):(a=ut(n),a+<span class="fstat-no" title="function not covered" >=(</span>-1===a.index<span class="cstat-no" title="statement not covered" >Of("?")?"?":"&amp;")+"url="+encodeURIComponent(<span class="fstat-no" title="function not covered" >o.</span>src),r=(i=n)<span class="cstat-no" title="statement not covered" >.settings.a</span>pi_</span>key</span>||i.sett<span class="cstat-no" title="statement not covered" >ings.imag<span class="fstat-no" title="function not covered" >et</span>ools_api_key<span class="cstat-no" title="statement not covered" >,wt(a,r)))},Pt=function(t,e)<span class="cstat-no" title="statement not covered" ></span>{var n=<span class="fstat-no" title="function not covered" >ot</span>.setEditorTimeout(t<span class="cstat-no" title="statement not covered" >,functi<span class="cstat-no" title="statement not covered" ></span>on(){t.editorUpload.uploadImagesAu<span class="fstat-no" title="function not covered" >to</span>()},t.settin<span class="cstat-no" title="statement not covered" >gs.images_upload_timeout||3e4);e.set(n)},Wt=fu</span>nct</span>io</span>n</span>(t){clear<span class="fstat-no" title="function not covered" >Ti</span>meo<span class="cstat-no" title="statement not covered" >ut(t.get())},qt=function(t</span>,e,n,o){r<span class="fstat-no" title="function not covered" >et</span>urn<span class="cstat-no" title="statement not covered" > e.toBlob().then(function(r){var<span class="fstat-no" title="function not covered" > i</span>,a,u,c,<span class="cstat-no" title="statement not covered" >l,s,f;return u=t.edit<span class="fstat-no" title="function not covered" >or</span>Upload.blob<span class="cstat-no" title="statement not covered" >Cache,i=(l=Lt(t)).src,t.settings.images_reuse_filename&amp;&amp;((c=u.getByUri(i))?(i=c.uri(),</span>a=c.nam</span>e()):(s=t,</span>a=(f=i.ma<span class="fstat-no" title="function not covered" >tc</span>h(/\<span class="cstat-no" title="statement not covered" >/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i))?s.dom.encode(f[1]):null)),c=u.create({id:"imagetools"+Dt++,blob:r,base64:e.toBase64(),uri:i,name:a}),u.add(c),t.undoManager.transact(function(){t.$(l).on("load",function e(){t.$(l).off("load",e),t.nodeC</span>hanged()<span class="cstat-no" title="statement not covered" >,n?t.edit<span class="fstat-no" title="function not covered" >or</span>Uplo<span class="cstat-no" title="statement not covered" >ad.uploadImagesAuto</span>(</span>):(Wt(o),<span class="fstat-no" title="function not covered" >Pt</span>(t,o))}<span class="cstat-no" title="statement not covered" >),t.$(l).attr({src:c.blobUri()}).removeAttr("data-mce-src")}),c})},Vt=function(t,e,n){return function(){return t._scanForImages().then(p.curry<span class="fstat-no" title="function not covered" >(F</span>t,t)).then(<span class="cstat-no" title="statement not covered" >tt.blobToImageResult).then(n).then(func<span class="fstat-no" title="function not covered" >ti</span>on(n){return<span class="cstat-no" title="statement not covered" > qt(t,n,!1,e)</span>},function(e){S<span class="fstat-no" title="function not covered" >t(</span>t,e)})}},Nt={rotate:<span class="cstat-no" title="statement not covered" >functi<span class="cstat-no" title="statement not covered" ></span>on(t,e,n){return fun</span>cti</span>on(</span>){return <span class="fstat-no" title="function not covered" >Vt</span>(t,e,function(e)<span class="cstat-no" title="statement not covered" >{var o=ct.getImageSize(Lt(t));return o&amp;&amp;ct.setImageSize(Lt(t),{w:o.h,h:o.w}),Z.rotate(e,n)})()}},flip:function(t,e,n){<span class="fstat-no" title="function not covered" >return fun</span>ction(){re<span class="cstat-no" title="statement not covered" >turn Vt(t,e,function(t){return Z.flip(t,n)})()}<span class="fstat-no" title="function not covered" >},</span>editImageDia<span class="cstat-no" title="statement not covered" >log:function(t,e</span>){return functi<span class="fstat-no" title="function not covered" >on</span>(){var n=Lt(t),o=ct.<span class="cstat-no" title="statement not covered" >getNat<span class="cstat-no" title="statement not covered" ></span>uralImageSize(n),r=f</span>unc</span>tion(t){return new rt(function(e){z(t).then(function(r){var i=ct.getNaturalImageSize(r);o.w===i.w&amp;&amp;o.h===i.h||ct.getImageSize(n)&amp;&amp;ct.setImageSize(n,i),nt.revokeObjectURL(r.src),e(t)}<span class="fstat-no" title="function not covered" >)}</span>)};Ft(t).th<span class="cstat-no" title="statement not covered" >en(tt.blobToImageResult).then(p.cur</span>ry(<span class="cstat-no" title="statement not covered" ></span>function(t,n){return Ot.edit(t,n).then(r).then(tt.blobToImageResult).then(function(n){return qt(t,n,!0,e)},function(){})},t),function(e){St(t,e)<span class="fstat-no" title="function not covered" >})</span>}},isEditabl<span class="cstat-no" title="statement not covered" >eImage:function(t,e){return t.dom.is(</span>e,"img:not([data-mce-object],[data-mce-placeholder])")&amp;&amp;(Ht(t,e)||_t(t,e)||t.settings.imagetools_proxy)},cancelTimedUpload:Wt},Xt=function(t,e){n.each({mceImageRotateLeft:Nt.rotate(t,e,-90),mceImageRotateRight:Nt.rotate(t,e,90),mceImageFlipVertical:Nt.flip(t,e,"v"),mceImageFlipHorizontal:Nt.flip(t,e,"h"),mceEditImage:Nt.edit<span class="fstat-no" title="function not covered" >ImageDial</span>og(t<span class="cstat-no" title="statement not covered" >,e)},function(e,n){t.addCommand(n,e)})},$t=function(</span>t,e,n){t.on("NodeChange",function(o){var r=n.get();r&amp;&amp;r.src!==o.element.src&amp;&amp;(Nt.cancelTimedUpload(e),t.editorUpl<span class="fstat-no" title="function not covered" >oa</span>d.uploadImagesAuto()<span class="cstat-no" title="statement not covered" >,n.set(null)),Nt.isEditableImage(t,</span>o.el<span class="cstat-no" title="statement not covered" >ement)&amp;&amp;n.set(o.element)})},Gt=func<span class="cstat-no" title="statement not covered" ></span>tion(t){t.addButton(<span class="fstat-no" title="function not covered" >"r</span>otateleft",{<span class="cstat-no" title="statement not covered" >title:"Rotate counterclockwise",cmd:"mceImageRotateL<span class="cstat-no" title="statement not covered" >eft"}),t.addButton("rotat</span>e</span>right",<span class="cstat-no" title="statement not covered" >{title:"Rotate clockwise",cm<span class="cstat-no" title="statement not covered" ></span>d:"mceI<span class="fstat-no" title="function not covered" >ma</span>geRotateRig<span class="cstat-no" title="statement not covered" >ht"}),t.addButton("flipv",{title:"<span class="fstat-no" title="function not covered" >Fl</span>ip verticall<span class="cstat-no" title="statement not covered" >y",cmd:"mceImageFlipVertical"}),t.addButton("f</span>lip</span>h"</span>,{title:"Flip horizontall</span>y",cmd:"mceImageFlipHorizontal"}),t.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),t.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},Yt=function(t){t.addContextToolbar(p.curry(Nt.isEditableImage,t),at(t))};e.add("imagetools",function(e){var n=t(0),o=t(null);Xt(e,n),Gt(e),Yt(e),$t(e,n,o)})}();<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Thu Mar 15 2018 17:06:20 GMT+0100 (WAT)
</div>
</div>
<script src="../../../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../../../sorter.js"></script>
</body>
</html>
